(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5293:(e,t,r)=>{"use strict";r.d(t,{l:()=>a});let a={lat:42.4495,lng:-76.4722}},47290:(e,t,r)=>{"use strict";r.d(t,{V_:()=>d,xt:()=>s});let a={enableEmail:!0,enableSMS:!0,emailRecipients:["jyoo45@binghamton.edu"],phoneNumbers:["6077747313"],alertThreshold:"medium",criticalThresholds:{temperature:{min:30,max:38},humidity:{min:35,max:75},weight:{minChange:2},entranceActivity:{min:15},queenActivity:{min:20}}},i={temperature:{min:31.5,max:37,unit:"\xb0C",criticalMin:30,criticalMax:38},humidity:{min:50,max:75,unit:"%",criticalMin:50,criticalMax:75},weight:{criticalDelta:-1,unit:"kg"},varroaMite:{warningLevel:2,criticalLevel:3,unit:"%"}},s=(e,t)=>{let r=[],a=!1;return e.metrics.temperature<i.temperature.criticalMin?(r.push("Temperature critically low: ".concat(e.metrics.temperature.toFixed(2)).concat(i.temperature.unit," (below ").concat(i.temperature.criticalMin).concat(i.temperature.unit,")")),a=!0):e.metrics.temperature>i.temperature.criticalMax?(r.push("Temperature critically high: ".concat(e.metrics.temperature.toFixed(2)).concat(i.temperature.unit," (above ").concat(i.temperature.criticalMax).concat(i.temperature.unit,")")),a=!0):e.metrics.temperature<i.temperature.min?r.push("Temperature warning: ".concat(e.metrics.temperature.toFixed(2)).concat(i.temperature.unit," (below ideal minimum ").concat(i.temperature.min).concat(i.temperature.unit,")")):e.metrics.temperature>i.temperature.max&&r.push("Temperature warning: ".concat(e.metrics.temperature.toFixed(2)).concat(i.temperature.unit," (above ideal maximum ").concat(i.temperature.max).concat(i.temperature.unit,")")),e.metrics.humidity<i.humidity.criticalMin?(r.push("Humidity critically low: ".concat(e.metrics.humidity.toFixed(2)).concat(i.humidity.unit," (below ").concat(i.humidity.criticalMin).concat(i.humidity.unit,")")),a=!0):e.metrics.humidity>i.humidity.criticalMax?(r.push("Humidity critically high: ".concat(e.metrics.humidity.toFixed(2)).concat(i.humidity.unit," (above ").concat(i.humidity.criticalMax).concat(i.humidity.unit,")")),a=!0):e.metrics.humidity<i.humidity.min?r.push("Humidity warning: ".concat(e.metrics.humidity.toFixed(2)).concat(i.humidity.unit," (below ideal minimum ").concat(i.humidity.min).concat(i.humidity.unit,")")):e.metrics.humidity>i.humidity.max&&r.push("Humidity warning: ".concat(e.metrics.humidity.toFixed(2)).concat(i.humidity.unit," (above ideal maximum ").concat(i.humidity.max).concat(i.humidity.unit,")")),e.metrics.varroaMiteLevel>i.varroaMite.criticalLevel?(r.push("Varroa mite level critically high: ".concat(e.metrics.varroaMiteLevel.toFixed(2)).concat(i.varroaMite.unit," (above critical threshold ").concat(i.varroaMite.criticalLevel).concat(i.varroaMite.unit,")")),a=!0):e.metrics.varroaMiteLevel>i.varroaMite.warningLevel&&r.push("Varroa mite level warning: ".concat(e.metrics.varroaMiteLevel.toFixed(2)).concat(i.varroaMite.unit," (above warning threshold ").concat(i.varroaMite.warningLevel).concat(i.varroaMite.unit,")")),t&&e.metrics.weight-t.metrics.weight<i.weight.criticalDelta&&(r.push("Weight critically decreased: ".concat(e.metrics.weight.toFixed(2)).concat(i.weight.unit," (dropped ").concat(Math.abs(e.metrics.weight-t.metrics.weight).toFixed(2)).concat(i.weight.unit," since last reading)")),a=!0),{isCritical:a,criticalMessages:r}},n=(e,t,r)=>'\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="UTF-8">\n      <title>Beehive Alert: '.concat(e,'</title>\n      <style>\n        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }\n        .header { background-color: #FFA500; color: white; padding: 15px; border-radius: 5px 5px 0 0; }\n        .header h1 { margin: 0; font-size: 24px; }\n        .content { border: 1px solid #ddd; border-top: none; padding: 20px; border-radius: 0 0 5px 5px; }\n        .alert-message { background-color: #FFF4E6; border-left: 4px solid #FF3B30; margin-bottom: 15px; padding: 10px; }\n        .metrics { background-color: #F5F5F5; padding: 15px; border-radius: 5px; margin-top: 20px; }\n        .metrics-table { width: 100%; border-collapse: collapse; }\n        .metrics-table td { padding: 8px; border-bottom: 1px solid #ddd; }\n        .metrics-table tr:last-child td { border-bottom: none; }\n        .footer { margin-top: 30px; font-size: 12px; color: #777; }\n      </style>\n    </head>\n    <body>\n      <div class="header">\n        <h1>⚠️ Beehive Alert: ').concat(e,'</h1>\n      </div>\n      <div class="content">\n        <p>The following critical conditions have been detected for <strong>').concat(e,'</strong>:</p>\n        \n        <div class="alerts">\n          ').concat(t.map(e=>'\n            <div class="alert-message">\n              <p>'.concat(e,"</p>\n            </div>\n          ")).join(""),'\n        </div>\n        \n        <div class="metrics">\n          <h3>Current Metrics:</h3>\n          <table class="metrics-table">\n            <tr>\n              <td><strong>Temperature:</strong></td>\n              <td>').concat(r.temperature.toFixed(2),"\xb0C</td>\n            </tr>\n            <tr>\n              <td><strong>Humidity:</strong></td>\n              <td>").concat(r.humidity.toFixed(2),"%</td>\n            </tr>\n            <tr>\n              <td><strong>Weight:</strong></td>\n              <td>").concat(r.weight.toFixed(2)," kg</td>\n            </tr>\n            <tr>\n              <td><strong>Entrance Activity:</strong></td>\n              <td>").concat(r.entranceActivity.toFixed(2),'/100</td>\n            </tr>\n          </table>\n        </div>\n        \n        <p><strong>Please take immediate action if needed.</strong></p>\n        \n        <div class="footer">\n          <p>This is an automated alert from the Buzzed Beehive Monitoring System.</p>\n          <p>Time: ').concat(new Date().toLocaleString(),"</p>\n        </div>\n      </div>\n    </body>\n    </html>\n  "),l=async(e,t,r,a)=>{console.log("⏳ Preparing email alert notification to ".concat(e.join(", "))),console.log("\uD83D\uDCE7 Subject: ".concat(t));let i="",s="";a?(i=n(a.name,r,a.metrics),s="Alert: ".concat(t,"\n\n").concat(a.name," requires attention.\n").concat(r.join("\n"))):(i="<html><body><h2>".concat(t,"</h2><p>").concat(r.join("<br/>"),"</p></body></html>"),s="Alert: ".concat(t,"\n\n").concat(r.join("\n")));try{let r=await fetch("/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipients:e,subject:t,htmlContent:i,textContent:s,beehiveInfo:a?{id:a.id,name:a.name,metrics:a.metrics}:null})}),n=await r.json();if(r.ok&&n.success)return console.log("✅ Email sent successfully:",n.messageId),!0;return console.error("❌ Failed to send email:",n.error),!1}catch(e){return console.error("❌ Error sending email notification:",e),!1}},o=async(e,t)=>(console.log("\uD83D\uDCF1 Would send SMS to ".concat(e.join(", "),": ").concat(t)),!0),d=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,{isCritical:i,criticalMessages:n}=s(e,t);if(i&&r.enableEmail){let t="\uD83D\uDEA8 CRITICAL ALERT: ".concat(e.name," requires immediate attention"),a=["Critical alerts detected for ".concat(e.name," at ").concat(e.location,":"),...n];await l(r.emailRecipients,t,a,e)}if(i&&r.enableSMS){let t="ALERT: ".concat(e.name," has critical issues: ").concat(n[0]).concat(n.length>1?" and ".concat(n.length-1," more issues"):"");await o(r.phoneNumbers,t)}let d={high:0,medium:1,low:2};for(let t of e.alerts.filter(e=>!e.resolved&&d[e.severity]<=d[r.alertThreshold])){if(r.enableEmail){let a="".concat("high"===t.severity?"\uD83D\uDEA8":"⚠️"," ").concat(e.name,": ").concat(t.message);await l(r.emailRecipients,a,["Alert type: ".concat(t.type),t.message],e)}if(r.enableSMS&&"high"===t.severity){let a="ALERT: ".concat(e.name," - ").concat(t.message);await o(r.phoneNumbers,a)}}}},55521:(e,t,r)=>{Promise.resolve().then(r.bind(r,82685))},82685:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>G});var a=r(95155),i=r(12115);function s(e){let{apiaryName:t,location:r}=e;return(0,a.jsx)("header",{className:"bg-gradient-to-r from-amber-500 to-yellow-400 text-white p-3 md:p-4 shadow-md",children:(0,a.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-xl md:text-2xl font-bold flex items-center",children:[(0,a.jsxs)("svg",{className:"w-5 h-5 md:w-6 md:h-6 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{d:"M12,22c-0.3,0-0.5-0.1-0.7-0.3l-9-9c-0.4-0.4-0.4-1,0-1.4l9-9c0.4-0.4,1-0.4,1.4,0l9,9c0.4,0.4,0.4,1,0,1.4l-9,9 C12.5,21.9,12.3,22,12,22z M4.8,12L12,19.2L19.2,12L12,4.8L4.8,12z"}),(0,a.jsx)("path",{d:"M12,13c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S13.7,13,12,13z M12,9c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S12.6,9,12,9z"})]}),t]}),(0,a.jsx)("p",{className:"text-sm md:text-base text-white/80",children:r})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"hidden md:block mr-4",children:(0,a.jsx)("p",{className:"text-sm",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),(0,a.jsx)("div",{className:"block md:hidden",children:(0,a.jsx)("p",{className:"text-xs",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})})})]})]})})}var n=r(90076);function l(e){let{beehives:t,onSelectBeehive:r}=e,i=e=>{switch(e){case"healthy":return"bg-green-500";case"warning":return"bg-yellow-500";case"critical":return"bg-red-500";default:return"bg-gray-500"}},s=e=>(0,n.m)(new Date(e),{addSuffix:!0});return(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-5",children:t.map(e=>{var t,n;return(0,a.jsx)("div",{onClick:()=>r(e),className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden transition-all hover:shadow-md hover:border-gray-200 dark:hover:border-gray-600 cursor-pointer",children:(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 rounded-full ".concat(i(e.status)," mr-2")}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:e.name})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Updated ",s(e.lastUpdated)]})]}),e.alerts.filter(e=>!e.resolved).length>0&&(0,a.jsx)("div",{className:"flex items-center px-2 py-1 bg-red-50 dark:bg-red-900/20 rounded-full",children:(0,a.jsxs)("span",{className:"text-xs font-medium text-red-700 dark:text-red-400",children:[e.alerts.filter(e=>!e.resolved).length," ",1===e.alerts.filter(e=>!e.resolved).length?"alert":"alerts"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,a.jsxs)("div",{className:"rounded-lg bg-gray-50 dark:bg-gray-700/40 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400 mb-1",children:[(0,a.jsxs)("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v1m0 6v1m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Temperature"})]}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:[e.metrics.temperature.toFixed(1),"\xb0C"]})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-gray-50 dark:bg-gray-700/40 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400 mb-1",children:[(0,a.jsx)("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Humidity"})]}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:[Math.round(e.metrics.humidity),"%"]})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-gray-50 dark:bg-gray-700/40 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400 mb-1",children:[(0,a.jsx)("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Weight"})]}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:[e.metrics.weight.toFixed(1)," kg"]})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-gray-50 dark:bg-gray-700/40 p-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400 mb-1",children:[(0,a.jsx)("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})}),(0,a.jsx)("span",{className:"text-xs font-medium",children:"Entrance Activity"})]}),(0,a.jsxs)("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:[Math.round(e.metrics.entranceActivity)," bees/min"]})]})]}),e.varroaInfestation&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{children:"Varroa infestation"}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("low"===e.varroaInfestation?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"medium"===e.varroaInfestation?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"),children:(null===(t=e.varroaInfestation)||void 0===t?void 0:t.charAt(0).toUpperCase())+(null===(n=e.varroaInfestation)||void 0===n?void 0:n.slice(1))})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1.5",children:(0,a.jsx)("div",{className:"h-1.5 rounded-full ".concat("low"===e.varroaInfestation?"bg-green-500":"medium"===e.varroaInfestation?"bg-yellow-500":"bg-red-500"),style:{width:"low"===e.varroaInfestation?"33%":"medium"===e.varroaInfestation?"66%":"100%"}})})]})]})},e.id)})})}var o=r(57280),d=r(30113),c=r(58581),m=r(94973),h=r(15255),x=r(12800),u=r(66963),g=r(27112),p=r(86354),y=r(16161),f=r(36),b=r(90518);function v(e){let{beehiveId:t,varroaDetections:r,varroaInfestation:s}=e,n=(0,i.useRef)(null),[l,m]=(0,i.useState)(null),[y,v]=(0,i.useState)(!0),[j,w]=(0,i.useState)(!1),[N,k]=(0,i.useState)(null),[M,F]=(0,i.useState)(null);(0,i.useEffect)(()=>{v(document.documentElement.classList.contains("dark"))},[]),(0,i.useEffect)(()=>{r&&r.length>0&&m([...r].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())[0])},[r]),(0,i.useEffect)(()=>{if(!l||!n.current)return;let e=n.current,t=e.getContext("2d");if(!t)return;t.clearRect(0,0,e.width,e.height),t.fillStyle=y?"#1f2937":"#f8fafc",t.fillRect(0,0,e.width,e.height);let r=y?"#e5e7eb":"#1f2937",a=y?"#f3f4f6":"#1f2937",i=y?"rgba(59, 130, 246, 0.7)":"rgba(37, 99, 235, 0.5)",s=y?"#fcd34d":"#f59e0b";t.strokeStyle=y?"rgba(75, 85, 99, 0.3)":"rgba(209, 213, 219, 0.5)",t.lineWidth=.5;for(let r=0;r<=e.width;r+=50)t.beginPath(),t.moveTo(r,0),t.lineTo(r,e.height),t.stroke();for(let r=0;r<=e.height;r+=50)t.beginPath(),t.moveTo(0,r),t.lineTo(e.width,r),t.stroke();t.strokeStyle=r,t.lineWidth=2,t.beginPath(),t.moveTo(0,e.height-30),t.lineTo(e.width,e.height-30),t.stroke(),t.beginPath(),t.moveTo(40,0),t.lineTo(40,e.height-30),t.stroke();let{spectralData:o,detectionFeatures:d}=l.vibrationData,c=t.createLinearGradient(0,0,0,e.height);y?(c.addColorStop(0,"#ef4444"),c.addColorStop(.25,"#fb923c"),c.addColorStop(.5,"#facc15"),c.addColorStop(.75,"#22d3ee"),c.addColorStop(1,"#1e3a8a")):(c.addColorStop(0,"#dc2626"),c.addColorStop(.25,"#ea580c"),c.addColorStop(.5,"#eab308"),c.addColorStop(.75,"#06b6d4"),c.addColorStop(1,"#1e40af"));let m=(e.height-50)/4e3,h=d.primaryFrequencyBand;for(let r=0;r<4e3;r+=10){let a=e.height-40-r*m,i=r>=h[0]&&r<=h[1],s=i?0:Math.min(Math.abs(r-h[0]),Math.abs(r-h[1])),n=i?.8+.2*Math.random():Math.max(.05,.6*Math.exp(-s/300));"primaryBand"===N&&i&&(n=1);for(let r=50;r<e.width-20;r++){let i=(r-50)/(e.width-70),s=n;for(let e of o.spectralRepetitionFrequencies)s=Math.max(0,Math.min(1,s+.4*Math.sin(2*Math.PI*(e/60)*i*10)));s*=.85+.15*Math.random(),t.globalAlpha=s,t.fillStyle=c,t.fillRect(r,a,1,2)}}t.globalAlpha=1;let x=(e.width-70)/60;o.spectralRepetitionFrequencies.forEach(r=>{let n=50+r*x;t.strokeStyle="repFreq"===N?s:i,t.lineWidth="repFreq"===N?2.5:1.5,t.beginPath(),t.moveTo(n,20),t.lineTo(n,e.height-40),t.stroke(),t.fillStyle="repFreq"===N?s:a,t.font="10px Arial",t.fillText("".concat(r.toFixed(1)," Hz"),n-12,15)}),t.fillStyle=a,t.font="12px Arial",t.fillStyle="repetition"===N?s:a,t.fillText("Pulse Repetition Frequency (Hz)",e.width/2-80,e.height-10),t.save(),t.translate(15,e.height/2),t.rotate(-Math.PI/2),t.fillStyle="frequency"===N?s:a,t.fillText("Frequency (Hz)",-50,0),t.restore(),t.fillStyle=a,t.font="10px Arial",[0,1e3,2e3,3e3,4e3].forEach(i=>{let n=e.height-40-i*m;t.strokeStyle=r,t.lineWidth=1,t.beginPath(),t.moveTo(35,n),t.lineTo(45,n),t.stroke(),t.fillStyle="frequency"===N?s:a,t.fillText("".concat(i),10,n+4)}),[0,10,20,30,40,50,60].forEach(i=>{let n=50+i*x;t.strokeStyle=r,t.lineWidth=1,t.beginPath(),t.moveTo(n,e.height-25),t.lineTo(n,e.height-35),t.stroke(),t.fillStyle="repetition"===N?s:a,t.fillText("".concat(i),n-5,e.height-15)}),t.fillStyle=a,t.font="bold 14px Arial",t.fillText("Detection Confidence: ".concat(l.detectionConfidence.toFixed(2),"%"),e.width-230,25),t.fillText("Status: ".concat(l.detectionStatus),e.width-230,45),d.varroaSignatureRegions&&d.varroaSignatureRegions.length>0&&(t.strokeStyle=y?"rgba(249, 115, 22, 0.7)":"rgba(234, 88, 12, 0.7)",t.lineWidth=2,d.varroaSignatureRegions.forEach(r=>{let a=50+r.repetitionFreq.min*x,i=50+r.repetitionFreq.max*x,s=e.height-40-r.frequency.min*m,n=e.height-40-r.frequency.max*m;t.beginPath(),t.moveTo(a,s),t.lineTo(i,s),t.lineTo(i,n),t.lineTo(a,n),t.closePath(),t.stroke(),t.fillStyle=y?"rgba(249, 115, 22, 0.9)":"rgba(234, 88, 12, 0.9)",t.font="9px Arial",t.fillText("Varroa",(a+i)/2-15,s-5)}))},[l,y,N]);let S=e=>{try{return(0,o.GP)((0,d.H)(e),"MMM d, yyyy h:mm a")}catch(t){return e}};return s?(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-700",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white mb-1",children:"Varroa Mite Detection"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Last updated: ",S(s.lastUpdated)]})]}),(0,a.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,a.jsx)("h3",{className:"text-md font-medium mb-4 text-white",children:"Current Infestation Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Infestation Level"}),(0,a.jsx)("p",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"none":return"bg-green-900/30 text-green-400 dark:bg-green-900/30 dark:text-green-400";case"low":return"bg-blue-900/30 text-blue-400 dark:bg-blue-900/30 dark:text-blue-400";case"moderate":return"bg-yellow-900/30 text-yellow-400 dark:bg-yellow-900/30 dark:text-yellow-400";case"high":return"bg-orange-900/30 text-orange-400 dark:bg-orange-900/30 dark:text-orange-400";case"severe":return"bg-red-900/30 text-red-400 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-900/30 text-gray-400 dark:bg-gray-900/30 dark:text-gray-400"}})(s.currentStatus.infestationLevel)),children:s.currentStatus.infestationLevel.charAt(0).toUpperCase()+s.currentStatus.infestationLevel.slice(1)})]}),(0,a.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Infestation Percentage"}),(0,a.jsxs)("p",{className:"text-xl font-bold ".concat(s.currentStatus.infestationPercentage<3?"text-green-400":s.currentStatus.infestationPercentage<8?"text-yellow-400":"text-red-400"),children:[s.currentStatus.infestationPercentage.toFixed(2),"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"of colony population affected"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Trend"}),(0,a.jsxs)("p",{className:"text-xl font-bold ".concat((e=>{switch(e){case"decreasing":return"text-green-600 dark:text-green-400";case"stable":return"text-blue-600 dark:text-blue-400";case"increasing":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}})(s.currentStatus.trendDirection)),children:[(e=>{switch(e){case"decreasing":return"↓";case"stable":return"→";case"increasing":return"↑";default:return"-"}})(s.currentStatus.trendDirection)," ",s.currentStatus.trendDirection.charAt(0).toUpperCase()+s.currentStatus.trendDirection.slice(1)]})]})]}),(0,a.jsxs)("div",{className:"mt-4 bg-gray-700 p-4 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Recommended Action"}),(0,a.jsx)("p",{className:"text-white",children:s.currentStatus.recommendedAction})]})]}),(0,a.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,a.jsx)("h3",{className:"text-md font-medium mb-4 text-white",children:"Detection History (14 days)"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(c.u,{width:"100%",height:"100%",children:(0,a.jsxs)(f.Q,{data:[...s.detectionHistory].reverse(),margin:{top:10,right:30,left:0,bottom:0},children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"colorDetection",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#a78bfa",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]}),(0,a.jsxs)("linearGradient",{id:"colorConfidence",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#4ade80",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:0})]})]}),(0,a.jsx)(h.d,{strokeDasharray:"3 3",stroke:"rgba(75, 85, 99, 0.3)"}),(0,a.jsx)(x.W,{dataKey:"date",tickFormatter:e=>(0,o.GP)((0,d.H)(e),"MMM d"),tick:{fill:"#e5e7eb"},stroke:"#e5e7eb"}),(0,a.jsx)(u.h,{yAxisId:"left",tick:{fill:"#e5e7eb"},stroke:"#e5e7eb"}),(0,a.jsx)(u.h,{yAxisId:"right",orientation:"right",domain:[0,100],tick:{fill:"#e5e7eb"},stroke:"#e5e7eb"}),(0,a.jsx)(g.m,{formatter:(e,t)=>"detectionCount"===t?["".concat(e," detections"),"Count"]:"averageConfidence"===t?["".concat(Number(e).toFixed(1),"%"),"Confidence"]:[e,t],labelFormatter:e=>(0,o.GP)((0,d.H)(e),"MMM d, yyyy"),contentStyle:{backgroundColor:"#374151",border:"none",borderRadius:"0.375rem",color:"#f3f4f6"},itemStyle:{color:"#f3f4f6"},labelStyle:{color:"#f3f4f6",fontWeight:"bold"}}),(0,a.jsx)(p.s,{wrapperStyle:{color:"#e5e7eb"}}),(0,a.jsx)(b.G,{type:"monotone",dataKey:"detectionCount",name:"Detections",stroke:"#a78bfa",fillOpacity:1,fill:"url(#colorDetection)",yAxisId:"left"}),(0,a.jsx)(b.G,{type:"monotone",dataKey:"averageConfidence",name:"Confidence",stroke:"#4ade80",fillOpacity:1,fill:"url(#colorConfidence)",yAxisId:"right"})]})})})]}),(0,a.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-md font-medium text-white",children:"Spectral Analysis (2DFT)"}),(0,a.jsx)("button",{onClick:()=>w(!j),className:"px-3 py-1 bg-gray-700 text-gray-300 text-sm rounded hover:bg-gray-600 transition duration-150",children:j?"Hide Explanation":"How to Read This?"})]}),j&&(0,a.jsxs)("div",{className:"mb-4 bg-gray-700/50 p-3 rounded-md border border-gray-600 text-gray-300 text-sm",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"How to Read the 2DFT Visualization"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-amber-400 font-medium",children:"X-axis:"})," Represents pulse repetition frequency (4-60 Hz) - how often the mite's legs create vibration patterns as they walk."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-amber-400 font-medium",children:"Y-axis:"})," Represents frequency bands (0-4000 Hz) - the acoustic signature of mite movement."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-amber-400 font-medium",children:"Color intensity:"})," Indicates the strength of spectral components - brighter colors show stronger signals."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-amber-400 font-medium",children:"Vertical blue lines:"})," Show specific repetition frequencies detected in the signal, typically 15-40 Hz for Varroa mites."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-amber-400 font-medium",children:"Red/orange regions:"})," Primary frequency band where Varroa signatures are strongest (typically 500-2000 Hz)."]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-white font-medium",children:"Key indicators of Varroa presence:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1",children:[(0,a.jsx)("li",{children:"Strong signals in the 500-2000 Hz range"}),(0,a.jsx)("li",{children:"Regular repetition patterns at 15-40 Hz"}),(0,a.jsx)("li",{children:"Distinct walking gait pattern visible as regular pulses"})]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-white font-medium",children:"Understanding Infestation Percentages:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-green-400 font-medium",children:"<3%:"})," Low infestation - routine monitoring recommended"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-yellow-400 font-medium",children:"3-8%:"})," Moderate infestation - treatment planning advised"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-orange-400 font-medium",children:"8-15%:"})," High infestation - prompt treatment needed"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"text-red-400 font-medium",children:">15%:"})," Severe infestation - immediate intervention required"]})]}),(0,a.jsx)("p",{className:"text-xs italic mt-1",children:"Percentages represent the proportion of bees in the colony that are affected by Varroa mites. Industry standards consider >3% as concerning and >10% as requiring immediate action."})]}),(0,a.jsx)("p",{className:"mt-2 text-xs italic",children:"Hover over different parts of the visualization for more information. The graph highlights features as you explore it."})]}),l?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Two-dimensional Fourier transform visualization of Varroa mite gait patterns"}),(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("canvas",{ref:n,width:600,height:300,className:"border border-gray-600 rounded mx-auto cursor-crosshair",onMouseMove:e=>{if(!n.current||!l)return;let t=n.current,r=t.getBoundingClientRect(),a=e.clientX-r.left,i=e.clientY-r.top;if(a<50&&i<t.height-30){let r=4e3-i/(t.height-30)*4e3;F({x:e.clientX,y:e.clientY,text:"Frequency: ".concat(Math.round(r)," Hz")}),k("frequency");return}if(a>=50&&i>t.height-30){let r=(a-50)/(t.width-70)*60;F({x:e.clientX,y:e.clientY,text:"Repetition: ".concat(r.toFixed(1)," Hz")}),k("repetition");return}if(a>=50&&i<t.height-30){let r=(t.height-50)/4e3,{primaryFrequencyBand:s}=l.vibrationData.detectionFeatures,n=t.height-40-s[0]*r,o=t.height-40-s[1]*r;if(i>=Math.min(n,o)-10&&i<=Math.max(n,o)+10){F({x:e.clientX,y:e.clientY,text:"Primary frequency band: ".concat(Math.round(s[0]),"-").concat(Math.round(s[1])," Hz")}),k("primaryBand");return}let d=(t.width-70)/60,{spectralRepetitionFrequencies:c}=l.vibrationData.spectralData;for(let t of c)if(5>Math.abs(a-(50+t*d))){F({x:e.clientX,y:e.clientY,text:"Repetition frequency: ".concat(t.toFixed(1)," Hz")}),k("repFreq");return}F({x:e.clientX,y:e.clientY,text:"Spectral magnitude at this point"}),k(null)}else F(null),k(null)},onMouseLeave:()=>{F(null),k(null)}}),M&&(0,a.jsx)("div",{className:"absolute bg-gray-900 text-white text-xs rounded px-2 py-1 z-10 pointer-events-none",style:{left:"".concat(M.x-280,"px"),top:"".concat(M.y-30,"px"),maxWidth:"200px"},children:M.text})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{className:"text-white",children:"Detection Time:"})," ",S(l.timestamp)]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{className:"text-white",children:"Primary Frequency Band:"})," ",Math.round(l.vibrationData.detectionFeatures.primaryFrequencyBand[0]),"-",Math.round(l.vibrationData.detectionFeatures.primaryFrequencyBand[1])," Hz"]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{className:"text-white",children:"Common Repetition Frequencies:"})," ",l.vibrationData.detectionFeatures.commonRepetitionFrequencies.map(e=>Math.round(e)).join(", ")," Hz"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{className:"text-white",children:"Location in Hive:"})," ",l.locationInHive]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{className:"text-white",children:"Mean Walking Speed:"})," ",l.vibrationData.detectionFeatures.meanWalkingSpeed.toFixed(1)," mm/s"]}),(0,a.jsxs)("p",{className:"mb-1",children:[(0,a.jsx)("strong",{className:"text-white",children:"Gait Time Between Pulses:"})," ",(1e3*l.vibrationData.detectionFeatures.pulseDuration).toFixed(0)," ms"]})]})]})]}):(0,a.jsx)("div",{className:"p-4 bg-gray-700 rounded text-center text-gray-400",children:"No detection data available for visualization"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-md font-medium mb-4 text-white",children:"Recent Detections"}),r&&r.length>0?(0,a.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[...r].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,5).map(e=>(0,a.jsxs)("div",{className:"p-3 border rounded-lg cursor-pointer transition-all hover:bg-gray-700 ".concat(l&&l.id===e.id?"bg-gray-700 border-purple-600":"bg-gray-800 border-gray-700"),onClick:()=>m(e),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-white",children:"confirmed"===e.detectionStatus?"\uD83D\uDD34 Confirmed Detection":"possible"===e.detectionStatus?"\uD83D\uDFE0 Possible Detection":"⚪ No Detection"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:S(e.timestamp)})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold text-white",children:[Math.round(e.detectionConfidence),"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"confidence"})]})]}),e.recommendedActions&&e.recommendedActions.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-300",children:"Recommended Actions:"}),(0,a.jsx)("ul",{className:"text-xs text-gray-400 list-disc ml-4",children:e.recommendedActions.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})]},e.id))}):(0,a.jsx)("div",{className:"p-4 bg-gray-700 rounded text-center text-gray-400",children:"No recent detections available"})]})]}):(0,a.jsx)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:"Loading Varroa data..."})}var j=r(7793),w=r(46549);let N=(e,t)=>Math.random()*(t-e)+e,k=e=>{let t=[];for(let r=0;r<e;r++)for(let e=0;e<3;e++){let a=8*e,i=N(32,36),s=N(40,70),n=N(25,35),l=N(30,95),d=N(-.5,.5);t.push({date:(0,o.GP)((0,j.e)(new Date(new Date().setHours(8+a,0,0,0)),r),"yyyy-MM-dd HH:mm"),temperature:+(i+d*(0===e?-1:1)).toFixed(2),humidity:+(s+2*d).toFixed(2),weight:+(n+.1*d).toFixed(2),entranceActivity:+(l+(1===e?10:2===e?-15:0)+5*d).toFixed(2)})}return t},M=e=>"hive-7"===e?[{id:"alert-".concat(e,"-varroa"),type:"varroa",severity:"medium",message:"Warning: Varroa mite level elevated: 2.8%",timestamp:(0,o.GP)((0,w.O)(new Date,Math.floor(6*Math.random())),"yyyy-MM-dd'T'HH:mm:ss"),resolved:!1}]:"hive-1"===e?[{id:"alert-".concat(e,"-humidity"),type:"humidity",severity:"high",message:"Humidity level too high: 78.5%",timestamp:(0,o.GP)((0,w.O)(new Date,Math.floor(6*Math.random())),"yyyy-MM-dd'T'HH:mm:ss"),resolved:!1}]:[],F=(e,t)=>{let r=N(25,35),a=N(32,36),i="healthy";"hive-7"===e?i="warning":"hive-1"===e&&(i="warning");let s=42.4509+N(-.0025,.0025),n=-76.4693+N(-.0025,.0025),l=0;l="hive-7"===e?2.8:N(0,1.5);let d=0;return d="hive-1"===e?78.5:+N(55,65).toFixed(2),{id:e,name:t,location:"Cornell Apiary",coordinates:{latitude:s,longitude:n},status:i,lastUpdated:(0,o.GP)(new Date,"yyyy-MM-dd'T'HH:mm:ss"),metrics:{temperature:+a.toFixed(2),humidity:d,weight:+r.toFixed(2),populationEstimate:Math.floor(N(1e4,5e4)),varroaMiteLevel:+l.toFixed(2),queenActivity:+N(0,100).toFixed(2),entranceActivity:+N(30,95).toFixed(2)},history:k(30),alerts:M(e)}},S=()=>{let e=[];for(let t=1;t<=12;t++)e.push(F("hive-".concat(t),"Hive ".concat(t)));let t=e.filter(e=>"healthy"===e.status).length,r=e.filter(e=>"warning"===e.status).length,a=e.filter(e=>"critical"===e.status).length,i=+(e.reduce((e,t)=>e+t.metrics.temperature,0)/12).toFixed(2),s=+(e.reduce((e,t)=>e+t.metrics.humidity,0)/12).toFixed(2),n=+(e.reduce((e,t)=>e+t.metrics.varroaMiteLevel,0)/12).toFixed(2);return{apiaryName:"Cornell Apiary",location:"Ithaca, NY",beehives:e,statistics:{totalBeehives:12,healthyBeehives:t,warningBeehives:r,criticalBeehives:a,averageTemperature:i,averageHumidity:s,averageVarroaMiteLevel:n}}},C=e=>{let t,r;let a=+(e.metrics.temperature+N(-.5,.5)).toFixed(2);t="hive-1"===e.id?78.5:+Math.max(50,Math.min(70,e.metrics.humidity+N(-1,1))).toFixed(2);let i=+(e.metrics.weight+N(-.1,.1)).toFixed(2),s=+Math.max(0,Math.min(100,e.metrics.entranceActivity+N(-5,5))).toFixed(2),n=+Math.max(0,Math.min(100,e.metrics.queenActivity+N(-3,3))).toFixed(2);r="hive-7"===e.id?2.8:Math.max(0,Math.min(1.5,e.metrics.varroaMiteLevel+N(-.1,.1))).toFixed(2);let l=e.coordinates.latitude+N(-1e-4,1e-4),d=e.coordinates.longitude+N(-1e-4,1e-4),c="healthy";"hive-7"===e.id?c="warning":"hive-1"===e.id&&(c="warning");let m=[...e.alerts];return"hive-7"===e.id&&0===m.length&&(m=[{id:"alert-".concat(e.id,"-varroa"),type:"varroa",severity:"medium",message:"Warning: Varroa mite level elevated: 2.8%",timestamp:(0,o.GP)((0,w.O)(new Date,Math.floor(6*Math.random())),"yyyy-MM-dd'T'HH:mm:ss"),resolved:!1}]),"hive-1"===e.id&&0===m.length&&(m=[{id:"alert-".concat(e.id,"-humidity"),type:"humidity",severity:"high",message:"Humidity level too high: 78.5%",timestamp:(0,o.GP)((0,w.O)(new Date,Math.floor(6*Math.random())),"yyyy-MM-dd'T'HH:mm:ss"),resolved:!1}]),{...e,coordinates:{latitude:l,longitude:d},status:c,lastUpdated:(0,o.GP)(new Date,"yyyy-MM-dd'T'HH:mm:ss"),metrics:{...e.metrics,temperature:a,humidity:t,weight:i,entranceActivity:s,queenActivity:n,varroaMiteLevel:+r},alerts:m}},D=e=>{let t=e.beehives.map(e=>C(e)),r=t.filter(e=>"healthy"===e.status).length,a=t.filter(e=>"warning"===e.status).length,i=t.filter(e=>"critical"===e.status).length,s=+(t.reduce((e,t)=>e+t.metrics.temperature,0)/t.length).toFixed(2),n=+(t.reduce((e,t)=>e+t.metrics.humidity,0)/t.length).toFixed(2),l=+(t.reduce((e,t)=>e+t.metrics.varroaMiteLevel,0)/t.length).toFixed(2);return{...e,beehives:t,statistics:{...e.statistics,healthyBeehives:r,warningBeehives:a,criticalBeehives:i,averageTemperature:s,averageHumidity:n,averageVarroaMiteLevel:l}}};var T=r(47290),L=r(13697);let A=(e,t)=>Math.random()*(t-e)+e,H=e=>{let t=A(500,800),r=A(1500,2e3),a=[],i=Math.floor(A(1,4));for(let e=0;e<i;e++)if(Math.random()>.5){let e=[4,6,14];a.push(e[Math.floor(Math.random()*e.length)])}else a.push(Math.floor(A(4,60)));return{timeSlice:new Date().toISOString(),frequencyBands:[{minFrequency:t,maxFrequency:r,magnitude:A(1e-5,5e-4),confidence:A(60,95)},{minFrequency:2500,maxFrequency:3500,magnitude:A(1e-5,1e-4),confidence:A(40,70)}],spectralRepetitionFrequencies:a,signalToNoiseRatio:A(1.5,5)}},q=e=>{let t=e.frequencyBands[0];return{primaryFrequencyBand:[t.minFrequency,t.maxFrequency],commonRepetitionFrequencies:e.spectralRepetitionFrequencies,pulseDuration:A(.04,.08),pulseStrength:A(.5,1),meanWalkingSpeed:A(1.5,4),discriminantScore:A(-2,2),beeVsVarroaConfidence:A(50,98),sampleDuration:1,accelerometerPosition:Math.random()>.5?"brood-comb":"bottom-board"}},W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=[];for(let r=0;r<e;r++)t.push(A(-.01,.01));if(Math.random()>.3){let r=A(500,2e3),a=A(4,20);for(let i=0;i<e;i++)t[i]+=.005*Math.sin(2*Math.PI*r*i/1e4),i%Math.floor(1e3/a)<10&&(t[i]+=.02*Math.exp(-.5*(i%Math.floor(1e3/a)/2)**2))}return t},P=e=>{let t=W(),r=H(t),a=q(r),i=0,s="none";a.primaryFrequencyBand[0]>=500&&a.primaryFrequencyBand[1]<=2e3&&a.commonRepetitionFrequencies.some(e=>[4,6,14].includes(e))&&a.pulseDuration>=.04&&a.pulseDuration<=.08&&((i=a.beeVsVarroaConfidence)>85?s="confirmed":i>65&&(s="possible"));let n=[];return"confirmed"===s?(n.push("Consider treatment options based on infestation level"),n.push("Conduct a physical inspection to confirm infestation")):"possible"===s&&(n.push("Monitor closely over the next few days"),n.push("Consider a bottom board mite count to confirm")),{id:(0,L.A)(),beehiveId:e,timestamp:new Date().toISOString(),detectionConfidence:i,detectionStatus:s,vibrationData:{rawSignal:t,spectralData:r,detectionFeatures:a},locationInHive:a.accelerometerPosition,recommendedActions:n}},I=e=>{let t=[];for(let r=0;r<e;r++)t.push({date:(0,o.GP)((0,j.e)(new Date,r),"yyyy-MM-dd"),detectionCount:Math.floor(A(0,r>10?15:5)),averageConfidence:A(60,95)});return t},B=e=>{let t,r;let a=I(14),i=a.slice(0,3),s=i.reduce((e,t)=>e+t.detectionCount,0)/i.length,n=a.slice(3,7),l=n.reduce((e,t)=>e+t.detectionCount,0)/n.length;t=s>1.2*l?"increasing":s<.8*l?"decreasing":"stable";let o=a[0].detectionCount,d=0;d=0===o?0:o<5?A(.5,3):o<10?A(3,8):o<20?A(8,15):A(15,30);let c="";return 0===d?(r="none",c="Continue monitoring"):d<3?(r="low",c="Monitor weekly, no immediate action required"):d<8?(r="moderate",c="Consider treatment within next 2-3 weeks"):d<15?(r="high",c="Treat colony within 7 days"):(r="severe",c="Immediate treatment required, colony at high risk"),{beehiveId:e,lastUpdated:new Date().toISOString(),detectionHistory:a,currentStatus:{infestationPercentage:d,infestationLevel:r,trendDirection:t,recommendedAction:c}}},E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,[t,r]=(0,i.useState)(null),[a,s]=(0,i.useState)(null),[n,l]=(0,i.useState)({}),[o,d]=(0,i.useState)(!0),[c,m]=(0,i.useState)(null);return(0,i.useEffect)(()=>{try{let e=S();r(e);let t={};e.beehives.forEach(e=>{let r=[],a=Math.floor(6*Math.random())+5;for(let t=0;t<a;t++)r.push(P(e.id));let i=B(e.id);t[e.id]={detections:r,infestation:i}}),l(t),d(!1)}catch(e){m("Failed to generate initial apiary data"),d(!1)}},[]),(0,i.useEffect)(()=>{if(!t)return;let i=setInterval(()=>{try{let e=D(t);r(e);let i={...n};if(e.beehives.forEach(e=>{if(.2>Math.random()){let t=P(e.id);i[e.id]&&(i[e.id].detections.push(t),i[e.id].detections.length>20&&(i[e.id].detections.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),i[e.id].detections=i[e.id].detections.slice(0,20)),i[e.id].infestation=B(e.id))}}),l(i),a){let t=e.beehives.find(e=>e.id===a.id);t&&(s(t),(0,T.V_)(t).catch(console.error))}}catch(e){console.error("Error updating apiary data:",e)}},e);return()=>clearInterval(i)},[t,a,e,n]),{apiaryData:t,selectedBeehive:a,loading:o,error:c,selectBeehive:e=>{s(e),(0,T.V_)(e).catch(console.error)},clearSelectedBeehive:()=>{s(null)},varroaData:n,getVarroaDataForBeehive:e=>n[e]||null}};function V(e){let{beehive:t,onClose:r}=e,{getVarroaDataForBeehive:i}=E(),s=i(t.id),n=[...t.history].reverse(),l=e=>{try{return(0,o.GP)((0,d.H)(e),"MMM d, yyyy h:mm:ss a")}catch(t){return e}},j=e=>{switch(e){case"low":return"bg-blue-100 text-blue-800";case"medium":return"bg-yellow-100 text-yellow-800";case"high":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-auto bg-gray-900 bg-opacity-70 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-auto",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:t.name}),(0,a.jsx)("span",{className:"ml-3 px-3 py-1 rounded-full text-sm ".concat((e=>{switch(e){case"healthy":return"bg-green-500 text-white";case"warning":return"bg-yellow-500 text-white";case"critical":return"bg-red-500 text-white";default:return"bg-gray-300 text-black"}})(t.status)),children:(e=>{switch(e){case"healthy":return"Healthy";case"warning":return"Warning";case"critical":return"Critical";default:return"Unknown"}})(t.status)})]}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Last updated: ",l(t.lastUpdated)]})]}),(0,a.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Current Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Temperature"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[t.metrics.temperature.toFixed(2),"\xb0C"]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Humidity"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[t.metrics.humidity.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Weight"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[t.metrics.weight.toFixed(2)," kg"]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Entrance Activity"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:[t.metrics.entranceActivity.toFixed(2),"/100"]})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Historical Data"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow",children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-800 dark:text-white mb-2",children:"Temperature (\xb0C)"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(c.u,{width:"100%",height:"100%",children:(0,a.jsxs)(m.b,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(h.d,{strokeDasharray:"3 3",stroke:"rgba(75, 85, 99, 0.3)"}),(0,a.jsx)(x.W,{dataKey:"date",tick:{fill:"#e5e7eb"},stroke:"#e5e7eb",tickFormatter:e=>e.split(" ")[0],interval:"preserveStartEnd"}),(0,a.jsx)(u.h,{domain:["dataMin - 1","dataMax + 1"],tick:{fill:"#e5e7eb"},stroke:"#e5e7eb",tickFormatter:e=>e.toFixed(2)}),(0,a.jsx)(g.m,{contentStyle:{backgroundColor:"#374151",border:"none",color:"#f3f4f6"},itemStyle:{color:"#f3f4f6"},labelStyle:{color:"#f3f4f6",fontWeight:"bold"}}),(0,a.jsx)(p.s,{wrapperStyle:{color:"#e5e7eb"}}),(0,a.jsx)(y.N,{type:"monotone",dataKey:"temperature",name:"Temperature",unit:"\xb0C",stroke:"#F59E0B",strokeWidth:2,dot:{r:1.5},activeDot:{r:6,strokeWidth:2},isAnimationActive:!0})]})})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow",children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-800 dark:text-white mb-2",children:"Humidity (%)"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(c.u,{width:"100%",height:"100%",children:(0,a.jsxs)(m.b,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(h.d,{strokeDasharray:"3 3",stroke:"rgba(75, 85, 99, 0.3)"}),(0,a.jsx)(x.W,{dataKey:"date",tick:{fill:"#e5e7eb"},stroke:"#e5e7eb",tickFormatter:e=>e.split(" ")[0],interval:"preserveStartEnd"}),(0,a.jsx)(u.h,{domain:[0,100],tick:{fill:"#e5e7eb"},stroke:"#e5e7eb",tickFormatter:e=>e.toFixed(2)}),(0,a.jsx)(g.m,{contentStyle:{backgroundColor:"#374151",border:"none",color:"#f3f4f6"},itemStyle:{color:"#f3f4f6"},labelStyle:{color:"#f3f4f6",fontWeight:"bold"}}),(0,a.jsx)(p.s,{wrapperStyle:{color:"#e5e7eb"}}),(0,a.jsx)(y.N,{type:"monotone",dataKey:"humidity",name:"Humidity",unit:"%",stroke:"#3B82F6",strokeWidth:2,dot:{r:1.5},activeDot:{r:6,strokeWidth:2},isAnimationActive:!0})]})})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow",children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-800 dark:text-white mb-2",children:"Weight (kg)"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(c.u,{width:"100%",height:"100%",children:(0,a.jsxs)(m.b,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(h.d,{strokeDasharray:"3 3",stroke:"rgba(75, 85, 99, 0.3)"}),(0,a.jsx)(x.W,{dataKey:"date",tick:{fill:"#e5e7eb"},stroke:"#e5e7eb",tickFormatter:e=>e.split(" ")[0],interval:"preserveStartEnd"}),(0,a.jsx)(u.h,{domain:["dataMin - 1","dataMax + 1"],tick:{fill:"#e5e7eb"},stroke:"#e5e7eb",tickFormatter:e=>e.toFixed(2)}),(0,a.jsx)(g.m,{contentStyle:{backgroundColor:"#374151",border:"none",color:"#f3f4f6"},itemStyle:{color:"#f3f4f6"},labelStyle:{color:"#f3f4f6",fontWeight:"bold"}}),(0,a.jsx)(p.s,{wrapperStyle:{color:"#e5e7eb"}}),(0,a.jsx)(y.N,{type:"monotone",dataKey:"weight",name:"Weight",unit:" kg",stroke:"#10B981",strokeWidth:2,dot:{r:1.5},activeDot:{r:6,strokeWidth:2},isAnimationActive:!0})]})})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow",children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-800 dark:text-white mb-2",children:"Entrance Activity"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(c.u,{width:"100%",height:"100%",children:(0,a.jsxs)(f.Q,{data:n,margin:{top:10,right:30,left:0,bottom:0},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorActivity",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]})}),(0,a.jsx)(h.d,{strokeDasharray:"3 3",stroke:"rgba(75, 85, 99, 0.3)"}),(0,a.jsx)(x.W,{dataKey:"date",tick:{fill:"#e5e7eb"},stroke:"#e5e7eb",tickFormatter:e=>e.split(" ")[0],interval:"preserveStartEnd"}),(0,a.jsx)(u.h,{domain:[0,100],tick:{fill:"#e5e7eb"},stroke:"#e5e7eb",tickFormatter:e=>e.toFixed(2)}),(0,a.jsx)(g.m,{contentStyle:{backgroundColor:"#374151",border:"none",color:"#f3f4f6"},itemStyle:{color:"#f3f4f6"},labelStyle:{color:"#f3f4f6",fontWeight:"bold"}}),(0,a.jsx)(p.s,{wrapperStyle:{color:"#e5e7eb"}}),(0,a.jsx)(b.G,{type:"monotone",dataKey:"entranceActivity",name:"Entrance Activity",stroke:"#8884d8",strokeWidth:2,fillOpacity:1,fill:"url(#colorActivity)",isAnimationActive:!0,activeDot:{r:6,strokeWidth:2}})]})})})]})]})]}),s&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Varroa Mite Detection"}),(0,a.jsx)(v,{beehiveId:t.id,varroaDetections:s.detections,varroaInfestation:s.infestation})]}),t.alerts.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Active Alerts"}),(0,a.jsx)("div",{className:"space-y-3",children:t.alerts.filter(e=>!e.resolved).map(e=>(0,a.jsx)("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow border-l-4 border-red-500",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium ".concat(j(e.severity)),children:e.severity}),(0,a.jsx)("p",{className:"mt-1 font-medium text-gray-800 dark:text-white",children:e.message})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l(e.timestamp)})]})},e.id))})]})]})]})})}function z(e){let{beehives:t,previousBeehives:r=null,onSelectBeehive:s}=e,[l,c]=(0,i.useState)(null),[m,h]=(0,i.useState)({}),[x,u]=(0,i.useState)({}),[g,p]=(0,i.useState)({}),y=e=>r&&r.find(t=>t.id===e)||null,f=t.flatMap(e=>e.alerts.filter(e=>!e.resolved).filter(e=>"activity"!==e.type).map(t=>({...t,beehiveId:e.id,beehiveName:e.name,status:e.status}))),b=t.flatMap(e=>{let t=y(e.id),{isCritical:r,criticalMessages:a}=(0,T.xt)(e,t);return r?a.map((t,r)=>{let a="other";return(t.toLowerCase().includes("temperature")?a="temperature":t.toLowerCase().includes("humidity")?a="humidity":t.toLowerCase().includes("weight")?a="weight":t.toLowerCase().includes("entrance")?a="activity":t.toLowerCase().includes("varroa")?a="varroa":t.toLowerCase().includes("queen")&&(a="population"),"activity"===a)?null:{id:"critical-".concat(e.id,"-").concat(r),type:a,severity:"high",message:t,timestamp:new Date().toISOString(),resolved:!1,beehiveId:e.id,beehiveName:e.name,status:e.status,isCriticalMetric:!0}}).filter(e=>null!==e):[]}),v={high:0,medium:1,low:2},j=[...b,...f].reduce((e,t)=>{let r="".concat(t.beehiveId,"-").concat(t.type),a=e.findIndex(e=>"".concat(e.beehiveId,"-").concat(e.type)===r);return -1!==a?v[e[a].severity]>v[t.severity]&&(e[a]=t):e.push(t),e},[]).sort((e,t)=>v[e.severity]!==v[t.severity]?v[e.severity]-v[t.severity]:new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),w=e=>{switch(e){case"low":return"bg-blue-900/30 text-blue-400 border-blue-900";case"medium":return"bg-yellow-900/30 text-yellow-400 border-yellow-900";case"high":return"bg-red-900/30 text-red-400 border-red-900";default:return"bg-gray-900/30 text-gray-400 border-gray-800"}},N=e=>{switch(e){case"temperature":return"\uD83C\uDF21️";case"humidity":return"\uD83D\uDCA7";case"weight":return"⚖️";case"population":return"\uD83D\uDC51";case"activity":return"\uD83D\uDC1D";case"varroa":return"\uD83E\uDD9F";default:return"⚠️"}},k=e=>{try{let t=(0,d.H)(e);return{formatted:(0,o.GP)(t,"MMM d, yyyy h:mm a"),relative:(0,n.m)(t,{addSuffix:!0})}}catch(t){return{formatted:e,relative:"unknown time"}}},M=e=>{c(l===e?null:e)},F=(e,r)=>{p(t=>({...t,[e]:!0})),setTimeout(()=>{if(h(t=>({...t,[e]:!0})),p(t=>({...t,[e]:!1})),s){let e=t.find(e=>e.id===r);e&&console.log("Treated ".concat(e.name," for varroa mites"))}},2e3)},S=(e,r)=>{p(t=>({...t,[e]:!0})),setTimeout(()=>{if(u(t=>({...t,[e]:!0})),p(t=>({...t,[e]:!1})),s){let e=t.find(e=>e.id===r);e&&console.log("Vented ".concat(e.name," to regulate environment"))}},2e3)};return 0===j.length?(0,a.jsx)("div",{className:"bg-gray-800 shadow rounded-lg p-4 md:p-6",children:(0,a.jsx)("div",{className:"text-center py-4 md:py-6",children:(0,a.jsx)("p",{className:"text-gray-400",children:"No active alerts"})})}):(0,a.jsxs)("div",{className:"bg-gray-800 shadow rounded-lg p-3 md:p-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-3 md:mb-4 flex items-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Alerts",(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-amber-900/30 text-amber-400 text-xs font-medium rounded-full",children:j.length})]}),(0,a.jsx)("ul",{className:"divide-y divide-gray-700",children:j.map(e=>{let t=k(e.timestamp);e.message.replace(/(\d+\.\d+)/g,e=>Number(e).toFixed(2));let r=l===e.id,i=m[e.id],s=x[e.id],n=g[e.id],o="temperature"===e.type||"humidity"===e.type,d="varroa"===e.type;return(0,a.jsx)("li",{className:"py-3",children:(0,a.jsxs)("div",{className:"flex items-center ".concat(o||d?"cursor-pointer hover:bg-gray-700 p-2 rounded":""),onClick:()=>o||d?M(e.id):null,children:[(0,a.jsx)("div",{className:"text-xl mr-3 flex-shrink-0",children:N(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center flex-wrap gap-2 mb-1",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-white mr-2 truncate",children:[e.beehiveName," - ","humidity"===e.type?"High Humidity (78.5%)":"varroa"===e.type?"Varroa Mites (2.8%)":e.type]}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium whitespace-nowrap ".concat(w(e.severity)),children:e.severity})]}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-400 mt-1",children:[(0,a.jsx)("span",{className:"mr-2",children:t.relative}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("healthy"===e.status?"bg-green-900/30 text-green-400":"warning"===e.status?"bg-yellow-900/30 text-yellow-400":"bg-red-900/30 text-red-400"),children:e.status})]}),s&&(0,a.jsx)("span",{className:"inline-flex items-center mt-2 px-2 py-0.5 rounded-full text-xs font-medium bg-green-900/30 text-green-400",children:"✅ Hive vented successfully"}),i&&(0,a.jsx)("span",{className:"inline-flex items-center mt-2 px-2 py-0.5 rounded-full text-xs font-medium bg-green-900/30 text-green-400",children:"✅ Varroa mite treatment applied"}),r&&!s&&!i&&(0,a.jsxs)("div",{className:"mt-3 space-y-2",children:[o&&(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),S(e.id,e.beehiveId)},disabled:n,className:"inline-flex w-full md:w-auto items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md ".concat(n?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-blue-900/30 text-blue-400 hover:bg-blue-800/50"),children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"inline-block w-3 h-3 mr-2 border-t-2 border-blue-500 rounded-full animate-spin"}),"Venting in progress..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),"Vent Beehive"]})}),d&&(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),F(e.id,e.beehiveId)},disabled:n,className:"inline-flex w-full md:w-auto items-center justify-center px-3 py-1.5 text-sm font-medium rounded-md ".concat(n?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-amber-900/30 text-amber-400 hover:bg-amber-800/50"),children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"inline-block w-3 h-3 mr-2 border-t-2 border-amber-500 rounded-full animate-spin"}),"Treatment in progress..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Treat for Varroa Mites"]})})]})]})]})},e.id)})})]})}r(5293);let R=(0,r(77711).default)(()=>Promise.all([r.e(761),r.e(36)]).then(r.bind(r,91036)),{loadableGenerated:{webpack:()=>[91036]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"rounded-xl overflow-hidden bg-gray-100 dark:bg-gray-800 flex items-center justify-center",style:{height:"300px",width:"100%"},children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-500"})})});function G(){let{apiaryData:e,selectedBeehive:t,loading:r,error:i,selectBeehive:n,clearSelectedBeehive:o}=E();return r?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(s,{apiaryName:"Buzzed Apiary",location:"Loading..."}),(0,a.jsx)("main",{className:"container mx-auto px-3 md:px-4 py-4 md:py-6",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-500"})})})]}):i||!e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(s,{apiaryName:"Buzzed Apiary",location:"Error State"}),(0,a.jsx)("main",{className:"container mx-auto px-3 md:px-4 py-4 md:py-6",children:(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 text-red-800 dark:text-red-400",children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Error Loading Dashboard"}),(0,a.jsx)("p",{children:i||"Failed to load apiary data. Please try refreshing the page."})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(s,{apiaryName:e.apiaryName,location:e.location}),(0,a.jsx)("main",{className:"container mx-auto px-3 md:px-4 py-4 md:py-6",children:t?(0,a.jsx)("div",{className:"mt-4 md:mt-6",children:(0,a.jsx)(V,{beehive:t,onClose:o})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-4 md:mt-6",children:(0,a.jsx)(z,{beehives:e.beehives,onSelectBeehive:n})}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-3 md:mb-5 flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Apiary Map"]}),(0,a.jsx)(R,{beehives:e.beehives,onSelectBeehive:n})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-3 md:mb-5 flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"All Beehives",(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400 text-xs font-medium rounded-full",children:e.beehives.length})]}),(0,a.jsx)(l,{beehives:e.beehives,onSelectBeehive:n})]})]})}),(0,a.jsx)("footer",{className:"bg-white dark:bg-gray-800 py-4 border-t dark:border-gray-700",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 text-center text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Cornell University Apiary. All rights reserved."]}),(0,a.jsx)("p",{className:"mt-1",children:"Real-time beehive monitoring system"})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[768,441,587,358],()=>t(55521)),_N_E=e.O()}]);